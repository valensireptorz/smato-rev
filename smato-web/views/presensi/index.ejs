<%- include('../partials/_head.ejs') %>

<%- include('../partials/_nav.ejs') %>
<div class="container mt-5">
  <h2 class="mb-4">Riwayat Presensi</h2>

  <% if (messageError && messageError.length > 0) { %>
    <div class="alert alert-danger"><%= messageError[0] %></div>
  <% } %>

  <% if (success && success.length > 0) { %>
    <div class="alert alert-success"><%= success[0] %></div>
  <% } %>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>No</th>
        <th>Nama Siswa</th>
        <th>Tanggal</th>
        <th>Jam</th>
        <th>Status</th>
        <th>Nama Mapel</th>
      </tr>
    </thead>
    <tbody>
      <% if (riwayatPresensi.length === 0) { %>
        <tr>
          <td colspan="6" class="text-center">Belum ada data presensi</td>
        </tr>
      <% } else { %>
        <% riwayatPresensi.forEach((presensi, index) => { %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= presensi.nama_siswa %></td>
            <td><%= new Date(presensi.tanggal_presensi).toLocaleDateString("id-ID") %></td>
            <td><%= presensi.jam_presensi %></td>
            <td><%= presensi.status %></td>
            <td><%= presensi.nama_mapel %></td>
          </tr>
        <% }) %>
      <% } %>
    </tbody>
  </table>
</div>
<%- include('../partials/_foot.ejs') %>
