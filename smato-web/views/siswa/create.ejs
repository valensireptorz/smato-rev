<%- include('../partials/_head.ejs') %>

<%- include('../partials/_nav.ejs') %>
          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Forms/</span> Add siswa</h4>

              <!-- Basic Layout & Basic with Icons -->
              <div class="row">
                <!-- Basic Layout -->
                <div class="col-xxl">
                  <div class="card mb-4">
                    <div class="card-header d-flex align-items-center justify-content-between">
                      <h5 class="mb-0">Akun Siswa</h5>
                      <small class="text-muted float-end"></small>
                    </div>
                    <div class="card-body">
                      <% if (error.length > 0) { %>
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                          <%= error[0] %>
                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                      <% } %>
                      
                      <% if (success.length > 0) { %>
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                          <%= success[0] %>
                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                      <% } %>
                      
                      <form action="/siswa/store" method="POST">

                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label">Kelas</label>
                          <div class="col-sm-10">
                            <select class="form-select" name="id_kelas" required>
                              <option selected disabled>Pilih</option>
                              <% for (var i = 0; i < data_kelas.length; i++) { %>
                                <option value="<%= data_kelas[i].id_kelas %>">
                                  <%= data_kelas[i].kode_kelas %>
                                </option>
                              <% } %>
                            </select>
                          </div>
                        </div>
                        

                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label">Nama Siswa</label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" name="nama_siswa" id="nama_siswa" placeholder="Nama" required />
                          </div>
                        </div>
                      
                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label">NIS</label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" name="nis" id="nis" placeholder="NIS" required />
                          </div>
                        </div>
                      
                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label">Alamat</label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" name="alamat" id="alamat" placeholder="Alamat" required />
                          </div>
                        </div>
                      
                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label"></label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" name="password" id="password" placeholder="Password" hidden />
                          </div>
                        </div>
                        
                      
                        <div class="row justify-content-end">
                          <div class="col-sm-10">
                            <button type="submit" class="btn btn-primary">Save</button>
                          </div>
                        </div>
                      </form>
                      
                    </div>
                  </div>
                </div>
                <script>
                  // Fungsi untuk generate password acak
                  function generatePassword(length = 8) {
                    const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
                    let password = "";
                    for (let i = 0; i < length; i++) {
                      password += chars.charAt(Math.floor(Math.random() * chars.length));
                    }
                    return password;
                  }
                
                  // Saat halaman dimuat, isi otomatis field password
                  window.addEventListener("DOMContentLoaded", () => {
                    const passwordField = document.getElementById("password");
                    if (passwordField && !passwordField.value) {
                      passwordField.value = generatePassword();
                    }
                  });
                </script>
                
                            <%- include('../partials/_foot.ejs') %>

